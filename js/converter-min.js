function calculateTrainPercentages(e){var t="undefined",n=null;for(var r in e){var i=e[r];if(typeof i===t||i===n)continue;if(typeof i.action===t||i.action===n||typeof i.x===t||i.x===n)continue;var s=new Vector(i.x,i.y),o=util.getTrainLine(i.linie),u=util.findClosestLine(s,o,r),a=util.convertPointToPercentage(s,u,o,r);i.percentage=a}}importScripts("lib-min.js");var util=new Util;addEventListener("message",function(e){var t=JSON.parse(e.data);calculateTrainPercentages(t),self.postMessage({type:"data",message:t})});